---
import Node from './Node.astro';
---

<div class="mindmap-container">
  <div class="mindmap">

    <!-- LEFT: Portfolio -->
    <div class="node-wrapper portfolio">
      <Node label="Portfolio" href="/portfolio" variant="secondary" size="md">
        <svg slot="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/>
          <path d="m9 12 2 2 4-4"/>
        </svg>
      </Node>
    </div>

    <!-- CENTER: About Me -->
    <div class="node-wrapper about">
      <Node label="About Me" href="/" variant="primary" size="lg">
        <svg slot="icon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="8" r="4"/>
          <path d="M20 21a8 8 0 0 0-16 0"/>
        </svg>
      </Node>
    </div>

    <!-- RIGHT: Contact -->
    <div class="node-wrapper contact">
      <Node label="Contact" href="/contact" variant="secondary" size="md">
        <svg slot="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect width="20" height="16" x="2" y="4" rx="2"/>
          <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
        </svg>
      </Node>
    </div>

    <!-- Connection Lines -->
    <div class="connections" aria-hidden="true">
      <!-- Horizontal: Portfolio ── About Me -->
      <div class="line line-left"></div>
      <!-- Horizontal: About Me ── Contact -->
      <div class="line line-right"></div>
      <!-- Vertical: About Me ── Blog -->
      <div class="line line-down"></div>
    </div>

    <!-- BELOW: Blog -->
    <div class="node-wrapper blog">
      <Node label="Blog" href="/blog" variant="accent" size="md">
        <svg slot="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 20h9"/>
          <path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"/>
        </svg>
      </Node>
    </div>

  </div>
</div>

<style>
  .mindmap-container {
    width: 100%;
    max-width: 1000px;
    height: 400px;
    position: relative;
  }

  .mindmap {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .node-wrapper {
    position: absolute;
    z-index: 1;
  }

  /* === CENTER: About Me === */
  .node-wrapper.about {
    top: 50px;
    left: 50%;
    transform: translateX(-50%);
  }

  /* === LEFT: Portfolio (spaced out ~2cm more = 75px from edge of About Me) === */
  .node-wrapper.portfolio {
    top: 65px;
    left: 50%;
    transform: translateX(-300px);
  }

  /* === RIGHT: Contact (spaced out ~2cm more = 75px from edge of About Me) === */
  .node-wrapper.contact {
    top: 65px;
    left: 50%;
    transform: translateX(180px);
  }

  /* === BELOW: Blog === */
  .mindmap .node-wrapper.blog {
    top: 280px;
    left: 0;
    right: 0;
    margin-left: auto;
    margin-right: auto;
    width: 120px;
    transform: none;
  }

  /* === CONNECTION LINES === */
  .connections {
    position: absolute;
    inset: 0;
    z-index: 0;
    pointer-events: none;
  }

  .line {
    position: absolute;
    opacity: 0.5;
    border-radius: 2px;
  }

  /* Horizontal: Portfolio ── About Me */
  .line-left {
    height: 3px;
    width: 100px;
    top: 125px;
    left: 50%;
    transform: translateX(-180px);
    background: linear-gradient(90deg, var(--secondary-dark), var(--primary-dark));
  }

  /* Horizontal: About Me ── Contact */
  .line-right {
    height: 3px;
    width: 100px;
    top: 130px;
    left: 50%;
    transform: translateX(80px);
    background: linear-gradient(90deg, var(--primary-dark), var(--secondary-dark));
  }

  /* Vertical: About Me ── Blog */
  .line-down {
    width: 3px;
    height: 70px;
    top: 210px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(180deg, var(--primary-dark), var(--accent-dark));
  }

  /* === MOBILE LAYOUT === */
  @media (max-width: 768px) {
    .mindmap-container {
      height: 500px;
    }

    .node-wrapper.about {
      top: 20px;
    }

    .node-wrapper.portfolio {
      top: 180px;
      transform: translateX(-120px);
    }

    .node-wrapper.contact {
      top: 180px;
      transform: translateX(0px);
    }

    .node-wrapper.blog {
      top: 350px;
      width: 100px;
    }

    .line-left, .line-right {
      display: none;
    }

    .line-down {
      height: 250px;
      top: 140px;
    }
  }
</style>
