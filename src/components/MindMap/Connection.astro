---
interface Props {
  from: { x: number; y: number };
  to: { x: number; y: number };
  variant?: 'primary' | 'secondary' | 'accent';
  animated?: boolean;
}

const { from, to, variant = 'primary', animated = false } = Astro.props;

const colors = {
  primary: '#8B5CF6',
  secondary: '#3B82F6',
  accent: '#22C55E'
};

const color = colors[variant];
---

<svg class="connection" viewBox="0 0 100 100" preserveAspectRatio="none">
  <defs>
    <linearGradient id={`gradient-${variant}`} x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style={`stop-color: ${color}; stop-opacity: 0.6`} />
      <stop offset="100%" style={`stop-color: ${color}; stop-opacity: 0.2`} />
    </linearGradient>
  </defs>
  <path
    d={`M ${from.x} ${from.y} Q 50 50 ${to.x} ${to.y}`}
    class={`connection-line ${animated ? 'animated' : ''}`}
    stroke={`url(#gradient-${variant})`}
    fill="none"
    stroke-width="2"
  />
</svg>

<style>
  .connection {
    position: absolute;
    pointer-events: none;
    z-index: 0;
  }

  .connection-line {
    stroke-linecap: round;
  }

  .connection-line.animated {
    stroke-dasharray: 8 4;
    animation: flow 1.5s linear infinite;
  }

  @keyframes flow {
    from {
      stroke-dashoffset: 24;
    }
    to {
      stroke-dashoffset: 0;
    }
  }
</style>
